<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="~{/layout/basic :: setContent(~{this::content})}">

    <th:block th:fragment="content">

        <div class="col-lg-12">
            <h1 class="page-header">나의 차량 목록</h1>
        </div>


        <div class="card mb-4" style="margin-top: 30px;">
            <div class="card-body">
                <table class="table table-striped text-center">
                    <thead>
                    <tr>
                        <th scope="col">소유주</th>

                        <th scope="col">모델</th>
                        <th scope="col">주행거리</th>
                        <th scope="col">정보</th>

                        <th scope="col">1일렌트 가격</th>

                        <th scope="col">modify</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="car:${allCars}">
                        <td th:text="${car.getOwner()}"> 1 </td>
                        <!--                        <td th:text="${post.getTitle()}" width="50%"> 1 </td>-->
                        <td th:text="${car.getCarModel()}"> 1 </td>
                        <td th:text="${car.getDriveDistance()}"> 1 </td>
<!--                            <td><a th:onclick="modifyCar([[${car.getId()}]], [[${car.getOwner()}]])" class="btn btn-primary">수정</a></td>-->
                        <td th:text="${car.getInfo()}"> 1 </td>
                        <td th:text="${car.getPrice()}"> 1 </td>

                        <td><a th:href="|/read-car/${car.getId()}|" class="btn btn-primary">상세</a></td>


                    </tr>
                    </tbody>
                </table>

                <div class="row d-flex justify-content-center">
                    <div class="row">
                        <div class="col">
                            <form action="/posts" method="GET">
                                <div class="btn-toolbar mb-3 ms-3">
                                    <div class="input-group me-2">
                                        <select name="option" class="form-select mr-2">
                                            <option value="title">title</option>
                                            <option value="writer">writer</option>
                                            <option value="content">content</option>
                                        </select>
                                    </div>
                                    <div class="btn-group" role="group">
                                        <input type="text" name="keyword" placeholder="검색어 입력">
                                        <button class="btn btn-secondary"> Search </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="col"><button class="btn btn-secondary float-end" onclick="location.href='/car'">등록하기</button></div>
                    </div>
                </div>
            </div>
        </div>


    </th:block>

</th:block>
</html>


<script>
    function modifyCar(carId) {
        alert("ok");
        let f = document.createElement('form');
        let hf = document.createElement('input');

        hf.setAttribute("name", "carId")
        hf.setAttribute("value", carId);

        f.appendChild(hf);
        f.setAttribute("method", 'post');
        f.setAttribute("action", '/mod-car');

        document.body.appendChild(f);

        f.submit();
    }

</script>
